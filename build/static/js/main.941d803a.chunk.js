(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(13),c=t.n(r),o=t(2),l=t(3),i=t.n(l),m="http://localhost:3001/api/persons",f=function(){return i.a.get(m).then((function(e){return e.data}))},d=function(e){return i.a.post(m,e).then((function(e){return e.data}))},s=function(e){return i.a.delete("".concat(m,"/").concat(e))},h=function(e,n){return i.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},b=(t(36),function(e){return u.a.createElement("div",null,"filter shown with",u.a.createElement("input",{value:e.value,onChange:e.onChange}))}),v=function(e){return u.a.createElement("form",{onSubmit:e.onSubmit},u.a.createElement("div",null,"name:",u.a.createElement("input",{value:e.namevalue,onChange:e.onChangeName,id:"name"})),u.a.createElement("div",null,"number:",u.a.createElement("input",{value:e.numbervalue,onChange:e.onChangeNumber})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add")))},E=function(e){var n=e.message;return null===n?null:n.startsWith("Error")?u.a.createElement("div",{className:"error"},n):u.a.createElement("div",{className:"success"},n)},p=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),l=Object(o.a)(c,2),i=l[0],m=l[1],p=Object(a.useState)(""),g=Object(o.a)(p,2),w=g[0],j=g[1],O=Object(a.useState)(""),C=Object(o.a)(O,2),S=C[0],N=C[1],k=Object(a.useState)(null),y=Object(o.a)(k,2),D=y[0],I=y[1];Object(a.useEffect)((function(){f().then((function(e){r(e)}))}),[]);var x=function(e){I(e),setTimeout((function(){I(null)}),2e3)};return u.a.createElement("div",null,u.a.createElement("h1",null,"Phonebook"),u.a.createElement(E,{message:D}),u.a.createElement(b,{value:S,onChange:function(e){return N(e.target.value)}}),u.a.createElement("h2",null,"Add a new:"),u.a.createElement(v,{onSubmit:function(e){e.preventDefault();var n={name:i,number:w},a=function(){m(""),j(""),document.getElementById("name").focus()};if(t.find((function(e){return e.name===i}))){if(window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))){var u=t.find((function(e){return e.name===i}));h(u.id,n).then((function(){f().then((function(e){return r(e)})),x("".concat(u.name,"'s number updated")),a()})).catch((function(){x("Error. Info of ".concat(u.name," has already been removed from server"))}))}}else d(n).then((function(e){r(t.concat(e)),x("Added ".concat(e.name)),a()}))},namevalue:i,numbervalue:w,onChangeName:function(e){return m(e.target.value)},onChangeNumber:function(e){return j(e.target.value)}}),u.a.createElement("h2",null,"Numbers:"),u.a.createElement("ul",null,t.filter((function(e){return e.name.match(new RegExp(S,"i"))})).map((function(e){return u.a.createElement("li",{key:e.id},e.name," ",e.number,u.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&s(e.id).then((function(){f().then((function(n){r(n),x("Deleted ".concat(e.name))}))}))}(e)}},"delete"))}))))};c.a.render(u.a.createElement(p,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.941d803a.chunk.js.map